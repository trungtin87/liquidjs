<!DOCTYPE html>
<html lang="vi">
<head prefix="og: https://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Liquid Drops | LiquidJS</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="LiquidJS is a simple, expressive and safe Shopify / GitHub Pages compatible template engine in pure JavaScript.">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net/">
  <link rel="manifest" href="/vi/manifest.json">
  <!-- Canonical links -->
  <link rel="canonical" href="https://trungtin87.github.io/liquidjs/vi/tutorials/drops.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="https://trungtin87.github.io/liquidjs/vi/tutorials/drops">
    
      <link rel="alternative" hreflang="zh-cn" href="https://trungtin87.github.io/liquidjs/zh-cn/vi/tutorials/drops">
    
      <link rel="alternative" hreflang="vi" href="https://trungtin87.github.io/liquidjs/vi/vi/tutorials/drops">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="../../icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../../icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../../icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../../icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../../icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../../icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../../icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../../icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="../../icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="../../icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="../../icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="../../icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="../../icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="../../icon/mstile-144x144.png">
  
<link rel="stylesheet" href="../../css/navy.css">

  <link rel="alternate" href="../../atom.xml" title="LiquidJS" type="application/atom+xml">
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/liquidjs/vi/" id="logo">LiquidJS</a>
    </h1>
    <nav id="main-nav">
      <a href="/liquidjs/vi/tutorials/intro-to-liquid.html" class="main-nav-link">Hướng dẫn</a><a href="/liquidjs/vi/tags/overview.html" class="main-nav-link">Thẻ</a><a href="/liquidjs/vi/filters/overview.html" class="main-nav-link">Bộ lọc</a><a href="/liquidjs/vi/playground.html" class="main-nav-link">Bảng thử</a><a href="/liquidjs/api/classes/Liquid.html" class="main-nav-link">API</a>
      <div id="search-input-wrap">
        <i id="search-input-icon" class="icon-search"></i>
        <input type="search" id="search-input" placeholder="Tìm kiếm...">
      </div>
    </nav>
    <div class="main-nav-link icon-nav-link">
      <label><i class="icon-network"></i> <span class="icon-nav-title">Tiếng Việt</span></label>
      <select id="lang-select" data-canonical="" data-root="/liquidjs/">
        
          <option value="en">English</option>
        
          <option value="zh-cn">简体中文</option>
        
          <option value="vi" selected>Tiếng Việt</option>
        
      </select>
    </div>
    <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/harttle/liquidjs" class="main-nav-link icon-nav-link"><i class="icon-github"></i> <span class="icon-nav-title">GitHub</span></a>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">Bắt đầu</strong><a href="intro-to-liquid.html" class="sidebar-link">Giới thiệu về Liquid</a><a href="setup.html" class="sidebar-link">Cài đặt</a><a href="options.html" class="sidebar-link">Tùy chọn</a><a href="render-file.html" class="sidebar-link">Kết xuất tệp</a><a href="partials-and-layouts.html" class="sidebar-link">Bao gồm và Bố cục</a><a href="use-in-expressjs.html" class="sidebar-link">Sử dụng trong Express.js</a><strong class="sidebar-title">Nâng cao</strong><a href="caching.html" class="sidebar-link">Bộ nhớ đệm</a><a href="escaping.html" class="sidebar-link">Thoát ký tự</a><a href="register-filters-tags.html" class="sidebar-link">Đăng ký Filters/Tags</a><a href="access-scope-in-filters.html" class="sidebar-link">Truy cập phạm vi trong filter</a><a href="parse-parameters.html" class="sidebar-link">Phân tích tham số</a><a href="render-tag-content.html" class="sidebar-link">Kết xuất nội dung thẻ</a><a href="drops.html" class="sidebar-link current">Liquid Drops</a><a href="sync-and-async.html" class="sidebar-link">Đồng bộ và Bất đồng bộ</a><a href="whitespace-control.html" class="sidebar-link">Kiểm soát khoảng trắng</a><a href="plugins.html" class="sidebar-link">Plugin</a><a href="operators.html" class="sidebar-link">Các toán tử</a><a href="truthy-and-falsy.html" class="sidebar-link">Truthy và Falsy</a><a href="dos.html" class="sidebar-link">DoS</a><a href="static-analysis.html" class="sidebar-link">Phân tích tĩnh</a><strong class="sidebar-title">Khác</strong><a href="migrate-to-9.html" class="sidebar-link">Chuyển sang LiquidJS 9</a><a href="changelog.html" class="sidebar-link">Nhật ký thay đổi</a><a href="differences.html" class="sidebar-link">Khác biệt với Shopify/liquid</a><a href="contribution-guidelines.html" class="sidebar-link">Hướng dẫn đóng góp</a>
  </div>
</aside>
      <article class="article-container" itemscope itemtype="https://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">Liquid Drops</h1>
                
                <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/harttle/liquidjs/edit/master/docs/source/vi/tutorials/drops.md" class="article-edit-link" title="Cải thiện tài liệu này"><i class="icon-pencil"></i></a>
                
              </header>
              <div class="article-content" itemprop="articleBody">
                <p>LiquidJS cũng cung cấp một cơ chế tương tự <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Shopify/liquid/wiki/Introduction-to-Drops">Shopify Drops</a>, cho phép tác giả template tích hợp chức năng tuỳ chỉnh khi giải quyết giá trị biến.</p>
<blockquote class="note info"><strong class="note-title">Drop for JavaScript</strong><p>Giao diện <em>Drop</em> được triển khai khác so với các filter hay chức năng template tích hợp. Vì LiquidJS chạy trên JavaScript, các Drop tuỳ chỉnh phải được hiện thực lại bằng JavaScript. Không có tương thích trực tiếp giữa lớp JavaScript và lớp Ruby.</p>
</blockquote>

<h2 id="Su-dung-co-ban" class="article-heading"><a href="#Su-dung-co-ban" class="headerlink" title="Sử dụng cơ bản"></a>Sử dụng cơ bản<a class="article-anchor" href="#Su-dung-co-ban" aria-hidden="true"></a></h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Liquid<span class="token punctuation">,</span> Drop <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'liquidjs'</span>

<span class="token keyword">class</span> <span class="token class-name">SettingsDrop</span> <span class="token keyword">extends</span> <span class="token class-name">Drop</span> <span class="token punctuation">&#123;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">'FOO'</span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token string">'BAR'</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> engine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Liquid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> template <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">foo: &#123;&#123;settings.foo&#125;&#125;, bar: &#123;&#123;settings.bar&#125;&#125;</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">settings</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">SettingsDrop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span>
<span class="token comment">// Kết quả: "foo: FOO, bar: BAR"</span>
engine<span class="token punctuation">.</span><span class="token function">parseAndRender</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">html</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://runkit.com/embed/2is7di4mc7kk">Runkit link</a></p>
<p>Như ví dụ trên, ngoài việc đọc thuộc tính từ context, bạn cũng có thể gọi phương thức. Bạn chỉ cần tạo một lớp kế thừa từ <code>Drop</code>.</p>
<blockquote class="note tip"><strong class="note-title">Async Methods</strong><p>LiquidJS hoàn toàn hỗ trợ async. Bạn có thể trả về một <code>Promise</code> trong các phương thức Drop hoặc đánh dấu phương thức là <code>async</code>.</p>
</blockquote>

<h2 id="liquidMethodMissing" class="article-heading"><a href="#liquidMethodMissing" class="headerlink" title="liquidMethodMissing"></a>liquidMethodMissing<a class="article-anchor" href="#liquidMethodMissing" aria-hidden="true"></a></h2><p>Khi không có một tập thuộc tính cố định, bạn có thể dùng <code>liquidMethodMissing</code> để giải quyết giá trị một tên biến một cách động.</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Liquid<span class="token punctuation">,</span> Drop <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'liquidjs'</span>

<span class="token keyword">class</span> <span class="token class-name">SettingsDrop</span> <span class="token keyword">extends</span> <span class="token class-name">Drop</span> <span class="token punctuation">&#123;</span>
  <span class="token function">liquidMethodMissing</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> key<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> engine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Liquid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Kết quả: "COO"</span>
engine<span class="token punctuation">.</span><span class="token function">parseAndRender</span><span class="token punctuation">(</span><span class="token string">"&#123;&#123;settings.coo&#125;&#125;"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">settings</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">SettingsDrop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">html</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>liquidMethodMissing</code> hỗ trợ Promise, nghĩa là bạn có thể gọi async bên trong nó (ví dụ lấy dữ liệu từ DB). Sử dụng Drops giúp không phải cứng mã từng thuộc tính vào context.</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Liquid<span class="token punctuation">,</span> Drop <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'liquidjs'</span>

<span class="token keyword">class</span> <span class="token class-name">DBDrop</span> <span class="token keyword">extends</span> <span class="token class-name">Drop</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">async</span> <span class="token function">liquidMethodMissing</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> record <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">getRecordByKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">return</span> record<span class="token punctuation">.</span>value
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> engine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Liquid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">DBDrop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span>
engine<span class="token punctuation">.</span><span class="token function">parseAndRender</span><span class="token punctuation">(</span><span class="token string">"&#123;&#123;db.coo&#125;&#125;"</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">html</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="valueOf-NaN" class="article-heading"><a href="#valueOf-NaN" class="headerlink" title="valueOf"></a>valueOf<a class="article-anchor" href="#valueOf-NaN" aria-hidden="true"></a></h2><p>Drops có thể triển khai <code>valueOf()</code>; giá trị trả về sẽ được dùng để thay thế chính Drop khi render. Ví dụ:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Liquid<span class="token punctuation">,</span> Drop <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'liquidjs'</span>

<span class="token keyword">class</span> <span class="token class-name">ColorDrop</span> <span class="token keyword">extends</span> <span class="token class-name">Drop</span> <span class="token punctuation">&#123;</span>
  <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token string">'red'</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> engine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Liquid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ColorDrop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span>
<span class="token comment">// Kết quả: "red"</span>
engine<span class="token punctuation">.</span><span class="token function">parseAndRender</span><span class="token punctuation">(</span><span class="token string">"&#123;&#123;color&#125;&#125;"</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">html</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="toLiquid" class="article-heading"><a href="#toLiquid" class="headerlink" title="toLiquid"></a>toLiquid<a class="article-anchor" href="#toLiquid" aria-hidden="true"></a></h2><p><code>toLiquid()</code> không phải là phương thức của <code>Drop</code>, nhưng nó có thể trả về một <code>Drop</code>. Khi bạn có một cấu trúc cố định trong <code>context</code> mà không thể thay đổi giá trị, bạn có thể triển khai <code>toLiquid()</code> để LiquidJS sử dụng giá trị trả về thay cho chính object đó khi render.</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Liquid<span class="token punctuation">,</span> Drop <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'liquidjs'</span>

<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">person</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">"Jun"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">"Yang"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Jun Yang"</span><span class="token punctuation">,</span>
    <span class="token function-variable function">toLiquid</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName<span class="token punctuation">,</span>
      <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">,</span>
      <span class="token comment">// dùng một `name` khác</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Yang, Jun"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> engine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Liquid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Kết quả: "Yang, Jun"</span>
engine<span class="token punctuation">.</span><span class="token function">parseAndRender</span><span class="token punctuation">(</span><span class="token string">"&#123;&#123;person.name&#125;&#125;"</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">html</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Bạn cũng có thể trả về một instance <code>PersonDrop</code> trong <code>toLiquid()</code> và triển khai chức năng trong <code>PersonDrop</code>:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Liquid<span class="token punctuation">,</span> Drop <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'liquidjs'</span>

<span class="token keyword">class</span> <span class="token class-name">PersonDrop</span> <span class="token keyword">extends</span> <span class="token class-name">Drop</span> <span class="token punctuation">&#123;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>person <span class="token operator">=</span> person
  <span class="token punctuation">&#125;</span>
  <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token punctuation">.</span>lastName <span class="token operator">+</span> <span class="token string">", "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token punctuation">.</span>firstName
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">person</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">"Jun"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">"Yang"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Jun Yang"</span><span class="token punctuation">,</span>
    <span class="token function-variable function">toLiquid</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PersonDrop</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> engine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Liquid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Kết quả: "Yang, Jun"</span>
engine<span class="token punctuation">.</span><span class="token function">parseAndRender</span><span class="token punctuation">(</span><span class="token string">"&#123;&#123;person.name&#125;&#125;"</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">html</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote class="note info"><strong class="note-title"><code>toLiquid()</code> vs. <code>valueOf()</code> Difference</strong><ul>
  <li><code>valueOf()</code> thường dùng để định nghĩa cách một biến được render, trong khi <code>toLiquid()</code> thường dùng để chuyển một object thành Drop hoặc một scope khác cung cấp cho template.</li>
  <li><code>valueOf()</code> là phương thức dành riêng cho Drops; còn <code>toLiquid()</code> có thể dùng trên bất kỳ object scope nào.</li>
  <li><code>valueOf()</code> được gọi khi chính biến sắp được render, thay thế bản thân; còn <code>toLiquid()</code> được gọi khi các thuộc tính của object sắp được đọc.</li>
</ul></blockquote>

<h2 id="Drops-dac-biet" class="article-heading"><a href="#Drops-dac-biet" class="headerlink" title="Drops đặc biệt"></a>Drops đặc biệt<a class="article-anchor" href="#Drops-dac-biet" aria-hidden="true"></a></h2><p>LiquidJS có một số Drop tích hợp sẵn để hỗ trợ việc viết template. Phần này tương thích với Shopify Liquid để đảm bảo tính di động của template.</p>
<h3 id="blank" class="article-heading"><a href="#blank" class="headerlink" title="blank"></a>blank<a class="article-anchor" href="#blank" aria-hidden="true"></a></h3><p>Dùng để kiểm tra xem một biến chuỗi có phải là <code>false</code>, <code>null</code>, <code>undefined</code>, chuỗi rỗng, hoặc chỉ chứa ký tự trắng.</p>
<pre class="line-numbers language-liquid" data-language="liquid"><code class="language-liquid"><span class="token liquid language-liquid"><span class="token delimiter punctuation">&#123;%</span> <span class="token keyword">unless</span> author <span class="token operator">==</span> blank <span class="token delimiter punctuation">%&#125;</span></span>
    <span class="token liquid language-liquid"><span class="token delimiter punctuation">&#123;&#123;</span>author<span class="token delimiter punctuation">&#125;&#125;</span></span>
<span class="token liquid language-liquid"><span class="token delimiter punctuation">&#123;%</span> <span class="token keyword">endif</span> <span class="token delimiter punctuation">%&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="empty" class="article-heading"><a href="#empty" class="headerlink" title="empty"></a>empty<a class="article-anchor" href="#empty" aria-hidden="true"></a></h3><p>Dùng để kiểm tra xem mảng, chuỗi, hoặc object có rỗng hay không.</p>
<pre class="line-numbers language-liquid" data-language="liquid"><code class="language-liquid"><span class="token liquid language-liquid"><span class="token delimiter punctuation">&#123;%</span> <span class="token keyword">if</span> authors <span class="token operator">==</span> <span class="token empty keyword">empty</span> <span class="token delimiter punctuation">%&#125;</span></span>
    Danh sách tác giả rỗng
<span class="token liquid language-liquid"><span class="token delimiter punctuation">&#123;%</span> <span class="token keyword">endif</span> <span class="token delimiter punctuation">%&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<blockquote class="note info"><strong class="note-title"><code>empty</code> implementation</strong><p>Với mảng và chuỗi, LiquidJS kiểm tra thuộc tính <code>.length</code>. Với object, LiquidJS dùng <code>Object.keys()</code> để kiểm tra có khóa hay không.</p>
</blockquote>

<h3 id="nil" class="article-heading"><a href="#nil" class="headerlink" title="nil"></a>nil<a class="article-anchor" href="#nil" aria-hidden="true"></a></h3><p><code>nil</code> Drop dùng để kiểm tra biến không được định nghĩa hoặc được định nghĩa là <code>null</code>/<code>undefined</code> (tương đương kiểm tra <code>== null</code> trong JavaScript).</p>
<pre class="line-numbers language-liquid" data-language="liquid"><code class="language-liquid"><span class="token liquid language-liquid"><span class="token delimiter punctuation">&#123;%</span> <span class="token keyword">if</span> nonexistent <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token delimiter punctuation">%&#125;</span></span>
    null variable
<span class="token liquid language-liquid"><span class="token delimiter punctuation">&#123;%</span> <span class="token keyword">endif</span> <span class="token delimiter punctuation">%&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="Cac-Drop-khac" class="article-heading"><a href="#Cac-Drop-khac" class="headerlink" title="Các Drop khác"></a>Các Drop khác<a class="article-anchor" href="#Cac-Drop-khac" aria-hidden="true"></a></h3><p>Vẫn còn một số Drop phục vụ các tag cụ thể như <code>forloop</code>, <code>tablerowloop</code>, <code>block</code>, được mô tả trong tài liệu các tag tương ứng.</p>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2025-12-03T09:08:22.484Z" itemprop="dateModified">Cập nhật lần cuối: 2025-12-03</time>
                <a href="render-tag-content.html" class="article-footer-prev" title="Kết xuất nội dung thẻ"><i class="icon-chevron-left"></i><span>Trước</span></a><a href="sync-and-async.html" class="article-footer-next" title="Đồng bộ và Bất đồng bộ"><span>Tiếp</span><i class="icon-chevron-right"></i></a>
              </footer>
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <div id="article-toc-inner-list">
                <strong class="sidebar-title">Mục lục</strong>
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Su-dung-co-ban"><span class="toc-text">Sử dụng cơ bản</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#liquidMethodMissing"><span class="toc-text">liquidMethodMissing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#valueOf-NaN"><span class="toc-text">valueOf</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#toLiquid"><span class="toc-text">toLiquid</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Drops-dac-biet"><span class="toc-text">Drops đặc biệt</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#blank"><span class="toc-text">blank</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#empty"><span class="toc-text">empty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nil"><span class="toc-text">nil</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cac-Drop-khac"><span class="toc-text">Các Drop khác</span></a></li></ol></li></ol>
              </div>
              <a href="#" id="article-toc-top">Lên đầu trang</a>
            </div>
          </aside>
        </div>
      </article>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2025 <a href="https://github.com/harttle/liquidjs/graphs/contributors" rel="external nofollow noreferrer" target="_blank">Harttle</a><br>
      Tài liệu được cấp phép theo <a href="https://creativecommons.org/licenses/by/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>.
    </div>
    <div id="footer-links">
      <a href="https://twitter.com/harttleharttle" rel="external nofollow noreferrer" class="footer-link" target="_blank"><i class="icon-twitter"></i></a>
      <a href="https://opencollective.com/liquidjs" rel="external nofollow noreferrer" class="footer-link" target="_blank"><i class="icon-opencollective"></i></a>
      <a href="https://github.com/harttle/liquidjs" rel="external nofollow noreferrer" class="footer-link" target="_blank"><i class="icon-github"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/liquidjs/vi/tutorials/intro-to-liquid.html" class="mobile-nav-link">Hướng dẫn</a><a href="/liquidjs/vi/tags/overview.html" class="mobile-nav-link">Thẻ</a><a href="/liquidjs/vi/filters/overview.html" class="mobile-nav-link">Bộ lọc</a><a href="/liquidjs/vi/playground.html" class="mobile-nav-link">Bảng thử</a><a href="/liquidjs/api/classes/Liquid.html" class="mobile-nav-link">API</a>
    </ul>
    
    <div class="mobile-sidebar-list">
      <strong class="mobile-nav-title">Bắt đầu</strong><a href="intro-to-liquid.html" class="mobile-nav-link">Giới thiệu về Liquid</a><a href="setup.html" class="mobile-nav-link">Cài đặt</a><a href="options.html" class="mobile-nav-link">Tùy chọn</a><a href="render-file.html" class="mobile-nav-link">Kết xuất tệp</a><a href="partials-and-layouts.html" class="mobile-nav-link">Bao gồm và Bố cục</a><a href="use-in-expressjs.html" class="mobile-nav-link">Sử dụng trong Express.js</a><strong class="mobile-nav-title">Nâng cao</strong><a href="caching.html" class="mobile-nav-link">Bộ nhớ đệm</a><a href="escaping.html" class="mobile-nav-link">Thoát ký tự</a><a href="register-filters-tags.html" class="mobile-nav-link">Đăng ký Filters/Tags</a><a href="access-scope-in-filters.html" class="mobile-nav-link">Truy cập phạm vi trong filter</a><a href="parse-parameters.html" class="mobile-nav-link">Phân tích tham số</a><a href="render-tag-content.html" class="mobile-nav-link">Kết xuất nội dung thẻ</a><a href="drops.html" class="mobile-nav-link current">Liquid Drops</a><a href="sync-and-async.html" class="mobile-nav-link">Đồng bộ và Bất đồng bộ</a><a href="whitespace-control.html" class="mobile-nav-link">Kiểm soát khoảng trắng</a><a href="plugins.html" class="mobile-nav-link">Plugin</a><a href="operators.html" class="mobile-nav-link">Các toán tử</a><a href="truthy-and-falsy.html" class="mobile-nav-link">Truthy và Falsy</a><a href="dos.html" class="mobile-nav-link">DoS</a><a href="static-analysis.html" class="mobile-nav-link">Phân tích tĩnh</a><strong class="mobile-nav-title">Khác</strong><a href="migrate-to-9.html" class="mobile-nav-link">Chuyển sang LiquidJS 9</a><a href="changelog.html" class="mobile-nav-link">Nhật ký thay đổi</a><a href="differences.html" class="mobile-nav-link">Khác biệt với Shopify/liquid</a><a href="contribution-guidelines.html" class="mobile-nav-link">Hướng dẫn đóng góp</a>
    </div>
    
  </div>
  <div id="mobile-button-list">
    <a href="https://github.com/harttle/liquidjs" class="mobile-nav-link" rel="external" target="_blank"><i class="icon-github"></i></a>
    <a href="https://opencollective.com/liquidjs" class="mobile-nav-link" rel="external" target="_blank"><i class="icon-opencollective"></i></a>
    <div id="mobile-lang-select-wrap" class="mobile-nav-link">
      <label for="mobile-lang-select"><i class="icon-network"></i></label>
      <select id="mobile-lang-select" data-canonical="" data-root="/liquidjs/">
        
          <option value="en">English</option>
        
          <option value="zh-cn">简体中文</option>
        
          <option value="vi" selected>Tiếng Việt</option>
        
      </select>
    </div>
  </div>
</nav>
  


<script src="../../js/main.js"></script>


<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
appId: 'QJ35YOZTU4',
apiKey: '8c6cbb824b4c5023f0bb2ef29e228bef',
indexName: 'liquidjs',
inputSelector: '#search-input',
debug: false
});
</script>
</body>
</html>